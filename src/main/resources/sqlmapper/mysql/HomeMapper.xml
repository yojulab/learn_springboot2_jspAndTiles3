<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Home">
	<select id="selectByExample" parameterType="Map"
		resultType="Map">
		select
		<include refid="Extend_Column_List" />
		<include refid="Extend_Column_Join" />
		<include refid="Example_Where_Clause" />
		order by RECRUIT_START_DATE
		<if test="pagination != null">
			LIMIT #{pagination.pageBegin}, #{pagination.pageEnd}
		</if>
	</select>
	<sql id="Extend_Column_List">
		COURSE.*, ORGANIZATION_COURSE.*
		<if test="SESSION_MEMBER_SEQ != null">
			, LECTURE_MEMBER.MEMBER_SEQ
		</if>
	</sql>
	<sql id="Extend_Column_Join">
		from ORGANIZATION_COURSE INNER JOIN COURSE on 1 = 1
		and ORGANIZATION_COURSE.COURSE_SEQ = COURSE.COURSE_SEQ
		and PARENT_COURSE_SEQ is null
		<if test="ORGANIZATION_COURSE_SEQ != null">
			and ORGANIZATION_COURSE_SEQ = #{ORGANIZATION_COURSE_SEQ}
		</if>
		<choose>
			<when test="USE_YN != null">
				and USE_YN = #{USE_YN}
			</when>
			<otherwise>
				and USE_YN = 'USE_YN_YES'
			</otherwise>
		</choose>
<!--
 		<choose>
			<when test="RECRUIT_END_DATE != null">
				and RECRUIT_END_DATE = #{RECRUIT_END_DATE}
			</when>
			<otherwise>
				and RECRUIT_END_DATE <![CDATA[ >= ]]>
				now()
			</otherwise>
		</choose>
-->		
 		<if test="SESSION_MEMBER_SEQ != null">
			LEFT JOIN LECTURE_MEMBER
			on LECTURE_MEMBER.COURSE_SEQ =
			COURSE.COURSE_SEQ
			AND MEMBER_SEQ = #{SESSION_MEMBER_SEQ}
		</if>
	</sql>
	<sql id="Example_Where_Clause">
		<where>
			<if test="searchText != null">
				<bind name="pattern" value="'%' + searchText + '%'" />
				and ${kindOf} like #{pattern}
			</if>
		</where>
	</sql>
	<sql id="Base_Column_List">
		*
	</sql>
	<select id="selectByPrimaryKey" parameterType="Map"
		resultType="Map">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Extend_Column_List" />
		<include refid="Extend_Column_Join" />
		<include refid="Example_Where_Clause" />
	</select>
	<select id="countByExample" parameterType="Map"
		resultType="Long">
		select count(ORGANIZATION_COURSE_SEQ)
		<include refid="Extend_Column_Join" />
		<include refid="Example_Where_Clause" />
	</select>
</mapper>